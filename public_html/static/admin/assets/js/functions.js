const atualizarIframe=function(e){$(e).find("iframe").on("load",function(){$(this).height($(this).contents().height())})};function alertSuccess(e,r){Swal.fire({icon:"success",title:"Sucesso",html:e}).then(function(){r&&r()})}function alertErrorValidate(e){var r=JSON.parse(e),t="",o="";Object.keys(r).forEach(function(e){o=r[e],t+=`<div>${o}</div>`}),alertError(t)}function alertError(e){Swal.fire({icon:"error",title:"Oops...",html:e})}const frmDelete=function(e){Swal.fire({title:"Tem certeza que deseja excluir este registro?",text:"Você não poderá desfazer esta operação.",type:"warning",showCancelButton:!0,confirmButtonText:"Sim, excluir!",cancelButtonText:"Cancelar"}).then(function(r){r.value&&$(e).submit()})},getParameterByName=function(e){var t=RegExp("[?&]"+"iframe"+"=([^&]*)").exec(window.location.search);return r&&decodeURIComponent(r[1].replace(/\+/g," "))};var executeFormAjax=function(e){const r=$(e).prop("action");var t,o=(t=RegExp("[?&]"+"iframe"+"=([^&]*)").exec(window.location.search))&&decodeURIComponent(t[1].replace(/\+/g," "));$.ajax({url:r,data:$(e).serializeArray(),method:"POST",success:function(e){if(o)window.parent.$(`#modal-${o}`).modal("toggle"),window.parent.alertSuccess(e.msg),window.parent.$(`#modal-${o}`).trigger("success",e);else{let r=function(){};e.route&&(r=function(){window.location=e.route}),alertSuccess(e.msg,r)}},error:function(e){const r=e.responseJSON;o?r.errors&&Object.keys(r.errors).length?window.parent.alertErrorValidate(JSON.stringify(r.errors)):window.parent.alertError(r.message):r.errors&&Object.keys(r.errors).length?alertErrorValidate(JSON.stringify(r.errors)):alertError(r.message)}})};$(function(){$(".btn-frm-remove").on("click",function(e){e.preventDefault();var r=$(this).attr("href");frmDelete(r)}),$(".ajax form, form.ajax").submit(function(e){e.preventDefault(),executeFormAjax($(this))}),$("#iframe").on("submit","form",function(e){e.preventDefault(),executeFormAjax($(this))})});
